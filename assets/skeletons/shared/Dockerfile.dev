# Dockerfile para desenvolvimento — imagem única com hot-reload
FROM node:22-alpine

WORKDIR /app

# Copia manifesto de deps para cache de layer
COPY package*.json ./

# Instala todas as dependências (inclui dev deps)
RUN npm ci

# Expõe portas: 3000 (backend Express) e 5173 (frontend Vite)
EXPOSE 3000 5173

# Inicia frontend + backend simultaneamente
CMD ["npm", "run", "dev:fullstack"]
